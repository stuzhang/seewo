# Windows å¹³å°æ„å»ºæŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†å¦‚ä½•åœ¨ Windows å¹³å°ä¸Šæ„å»ºå¸Œæ²ƒè§¦æ§ä¸€ä½“æœºç³»ç»Ÿä¿¡æ¯æ˜¾ç¤ºåº”ç”¨ã€‚

## ğŸš€ GitHub Actions è‡ªåŠ¨åŒ–æ„å»º

### è§¦å‘æ–¹å¼

1. **æ‰‹åŠ¨è§¦å‘**ï¼šåœ¨ GitHub ä»“åº“çš„ Actions é¡µé¢æ‰‹åŠ¨è¿è¡Œå·¥ä½œæµ
2. **è‡ªåŠ¨è§¦å‘**ï¼šæ¨é€ä»£ç åˆ° `main` åˆ†æ”¯æ—¶è‡ªåŠ¨æ„å»º
3. **PR è§¦å‘**ï¼šåˆ›å»º Pull Request åˆ° `main` åˆ†æ”¯æ—¶è§¦å‘æ„å»ºéªŒè¯

### æ„å»ºæ­¥éª¤

å·¥ä½œæµä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. **ç¯å¢ƒå‡†å¤‡**
   - ä½¿ç”¨ Windows æœ€æ–°ç‰ˆæœ¬çš„ GitHub Runner
   - å®‰è£… Node.js 18.x
   - å®‰è£… pnpm 8.x

2. **ä¾èµ–å®‰è£…**
   ```bash
   pnpm install --frozen-lockfile
   ```

3. **å‰ç«¯æ„å»º**
   ```bash
   pnpm run build
   ```

4. **Electron æ‰“åŒ…**
   ```bash
   pnpm run electron:build
   ```

5. **äº§ç‰©ä¸Šä¼ **
   - è‡ªåŠ¨ä¸Šä¼ æ„å»ºäº§ç‰©åˆ° GitHub Artifacts
   - ä¿ç•™ 30 å¤©

### ä½¿ç”¨æ–¹æ³•

1. **æŸ¥çœ‹æ„å»ºçŠ¶æ€**
   - è®¿é—®ä»“åº“çš„ Actions é¡µé¢
   - æŸ¥çœ‹æœ€æ–°çš„æ„å»ºçŠ¶æ€å’Œæ—¥å¿—

2. **ä¸‹è½½æ„å»ºäº§ç‰©**
   - åœ¨ Actions é¡µé¢æ‰¾åˆ°å¯¹åº”çš„æ„å»º
   - ä¸‹è½½ `windows-build-{commit-sha}` å‹ç¼©åŒ…
   - è§£å‹åè·å¾— Windows å®‰è£…åŒ…

## ğŸ”§ æœ¬åœ°æ„å»º

### ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- **åŒ…ç®¡ç†å™¨**: pnpm 8.x
- **Python**: 3.8+ (ç”¨äº node-gyp)
- **Visual Studio Build Tools**: 2019 æˆ–æ›´é«˜ç‰ˆæœ¬

### æ„å»ºæ­¥éª¤

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/stuzhang/seewo.git
   cd seewo
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pnpm install
   ```

3. **æ„å»ºå‰ç«¯**
   ```bash
   pnpm run build
   ```

4. **æ‰“åŒ… Electron åº”ç”¨**
   ```bash
   pnpm run electron:build
   ```

### æ„å»ºäº§ç‰©

æ„å»ºå®Œæˆåï¼Œåœ¨ `dist-electron` ç›®å½•ä¸‹ä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

- `*.exe` - Windows å®‰è£…ç¨‹åº
- `*.msi` - Windows MSI å®‰è£…åŒ…
- `*.zip` - ä¾¿æºç‰ˆå‹ç¼©åŒ…
- `*.blockmap` - å¢é‡æ›´æ–°æ˜ å°„æ–‡ä»¶

## ğŸ“¦ æ„å»ºé…ç½®

### package.json é…ç½®

```json
{
  "build": {
    "appId": "com.seewo.system-info",
    "productName": "å¸Œæ²ƒè§¦æ§ä¸€ä½“æœºç®¡ç†ç³»ç»Ÿ",
    "directories": {
      "output": "dist-electron"
    },
    "files": [
      "dist/**/*",
      "electron/**/*",
      "config/**/*"
    ],
    "extraResources": [
      {
        "from": "config",
        "to": "config"
      }
    ],
    "win": {
      "target": [
        {
          "target": "nsis",
          "arch": ["x64"]
        },
        {
          "target": "msi",
          "arch": ["x64"]
        },
        {
          "target": "zip",
          "arch": ["x64"]
        }
      ],
      "icon": "public/favicon.ico"
    }
  }
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### è·¯å¾„å¤„ç†

- ä½¿ç”¨ `path.join()` è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥
- é¿å…ç¡¬ç¼–ç è·¯å¾„åˆ†éš”ç¬¦
- ä½¿ç”¨ç›¸å¯¹è·¯å¾„è€Œä¸æ˜¯ç»å¯¹è·¯å¾„

### æ–‡ä»¶ç³»ç»Ÿæ“ä½œ

- ä½¿ç”¨ `fs.promises` è¿›è¡Œå¼‚æ­¥æ–‡ä»¶æ“ä½œ
- æ­£ç¡®å¤„ç†æ–‡ä»¶ä¸å­˜åœ¨çš„æƒ…å†µ
- ä½¿ç”¨ try-catch åŒ…è£…æ–‡ä»¶æ“ä½œ

### é…ç½®æ–‡ä»¶è¯»å–

- åŒºåˆ†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®è·¯å¾„
- ç”Ÿäº§ç¯å¢ƒä» `process.resourcesPath` è¯»å–
- å¼€å‘ç¯å¢ƒä»é¡¹ç›®ç›®å½•è¯»å–

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥ï¼šç¼ºå°‘ Python**
   ```bash
   npm install --global windows-build-tools
   ```

2. **æ„å»ºå¤±è´¥ï¼šç¼ºå°‘ Visual Studio Build Tools**
   - ä¸‹è½½å¹¶å®‰è£… Visual Studio Build Tools
   - ç¡®ä¿åŒ…å« C++ æ„å»ºå·¥å…·

3. **æ‰“åŒ…å¤±è´¥ï¼šæƒé™é—®é¢˜**
   - ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
   - æ£€æŸ¥é˜²ç—…æ¯’è½¯ä»¶æ˜¯å¦é˜»æ­¢æ–‡ä»¶æ“ä½œ

4. **åº”ç”¨å¯åŠ¨å¤±è´¥ï¼šé…ç½®æ–‡ä»¶ç¼ºå¤±**
   - ç¡®ä¿ `config` ç›®å½•è¢«æ­£ç¡®æ‰“åŒ…
   - æ£€æŸ¥ `extraResources` é…ç½®

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**
   ```bash
   DEBUG=electron-builder pnpm run electron:build
   ```

2. **æ£€æŸ¥æ‰“åŒ…å†…å®¹**
   - è§£å‹ç”Ÿæˆçš„å®‰è£…åŒ…
   - éªŒè¯æ–‡ä»¶ç»“æ„æ˜¯å¦æ­£ç¡®

3. **æµ‹è¯•å¼€å‘ç‰ˆæœ¬**
   ```bash
   pnpm run electron:dev
   ```

## ğŸ”„ æŒç»­é›†æˆ

### ç‰ˆæœ¬ç®¡ç†

- ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å· (Semantic Versioning)
- åœ¨ `package.json` ä¸­æ›´æ–°ç‰ˆæœ¬å·
- åˆ›å»º Git æ ‡ç­¾è§¦å‘å‘å¸ƒ

### è‡ªåŠ¨å‘å¸ƒ

- æ¨é€æ ‡ç­¾æ—¶è‡ªåŠ¨åˆ›å»º GitHub Release
- è‡ªåŠ¨ä¸Šä¼ æ„å»ºäº§ç‰©åˆ° Release
- ç”Ÿæˆå‘å¸ƒè¯´æ˜

## ğŸ“š ç›¸å…³èµ„æº

- [Electron Builder æ–‡æ¡£](https://www.electron.build/)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [Node.js å®˜æ–¹æ–‡æ¡£](https://nodejs.org/docs/)
- [pnpm å®˜æ–¹æ–‡æ¡£](https://pnpm.io/)

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·åœ¨ GitHub Issues ä¸­æå‡ºã€‚